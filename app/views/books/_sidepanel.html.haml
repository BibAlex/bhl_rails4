:javascript
  $(document).ready(function(){
    updatedetailedrate("#{params[:id]}", "volume");
    $('.tooltiplogin').tooltipster({ interactive: true, fixedWidth: 280});
    prepare_avg_rate();
  });

.col-md-4.pull-right.sidebar-offcanvas
  .spacing-left.list-group
    .list-group-item.default
      = I18n.t('common.tools')
    .list-group-item
      %ul.fa-ul.tools
        %li
          %i.fa.fa-li.fa-book
          %small
            = link_to I18n.t('common.read'), book_path(id: params[:id], tab: 'read')
        - if is_logged_in?
          %li
            %i.fa.fa-li.fa-plus-square
            %small
              %a{ onclick: "load_collections(#{params[:id]})", style: "cursor:pointer;" }
                = I18n.t('common.add_collection')
            .modal.fade{ "aria-hidden" => "true", "aria-labelledby" => "approvalModalLabel", "role" => "dialog", "tabindex" => "-1", id: "collection_modal_#{params[:id]}" }

    .list-group-item
      #rating_part
        = render partial: "rating/avg_rate", locals: { rate: @volume[:rate] }
      #detailedrate


      .ratenotcolored{ style: "height: 23px;float: right;" }
        = render partial: "rating/rating", locals: { rateable_id: params[:id], rateable_type: "volume", user_rate: @user_rate }
      %span.text-muted
        - if is_logged_in?
          = I18n.t('common.your_rating')

        %br
    .list-group-item
      %span.badge.badge-success
        = @collections_count
      %a{ href: "#collectionsfound" }
        =I18n.t('common.book_collections_count', count: @collections_count)

    - unless get_format(params[:id], 'mods').blank?
      %a.list-group-item{ "data-toggle" => "modal", "href" => "#modal-container", "role" => "button",  "onclick" => "loadformats('#{I18n.t('common.mods')}');" }
        %i.fa.fa-angle-double-right
        = I18n.t('common.mods')
    - unless get_format(params[:id], 'bibtex').blank?
      %a.list-group-item{ "data-toggle" => "modal", "href" => "#modal-container", "role" => "button", "onclick" => "loadformats('#{I18n.t('common.bibtex')}');" }
        %i.fa.fa-angle-double-right
        = I18n.t('common.bibtex')
    - unless get_format(params[:id], 'endnote').blank?
      %a.list-group-item{ "data-toggle" => "modal", "href" => "#modal-container", "role" => "button", "onclick" => "loadformats('#{I18n.t('common.endnote')}');" }
        %i.fa.fa-angle-double-right
        = I18n.t('common.endnote')

  #mods_hidden{ style: 'display: none;' }= get_format(params[:id], 'mods')
  #bibtex_hidden{ style: 'display: none;' }= get_format(params[:id], 'bibtex')
  #endnote_hidden{ style: 'display: none;' }= get_format(params[:id], 'endnote')
  #modal-container.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog"}
    .modal-dialog
      .modal-content
        .modal-header
          %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", type: "button"}
            Ã—
          %h4#modallabel.modal-title
        #modalcontent.modal-body