!function(t){t.fn.jRating=function(s){var a={bigStarsPath:"/assets/images_en/stars.png",smallStarsPath:"/assets/images_en/small.png",type:"big",step:!1,isDisabled:!1,length:5,decimalLength:0,rateMax:5,rateInfosX:-45,rateInfosY:5,onSuccess:null,onError:null};return this.length>0?this.each(function(){function e(t){var s=parseFloat(100*t/f*o.rateMax/100);switch(o.decimalLength){case 1:var a=Math.round(10*s)/10;break;case 2:var a=Math.round(100*s)/100;break;case 3:var a=Math.round(1e3*s)/1e3;break;default:var a=Math.round(1*s)/1}return a}function n(){switch(o.type){case"small":h=12,l=10,c=o.smallStarsPath;break;default:h=23,l=20,c=o.bigStarsPath}}function r(t){return t?t.offsetLeft+r(t.offsetParent):0}var o=t.extend(a,s),i=0,h=0,l=0,c="";if(t(this).hasClass("jDisabled")||o.isDisabled)var p=!0;else var p=!1;n(),t(this).height(l);var d=parseFloat(t(this).attr("data").split("_")[0]),u=parseInt(t(this).attr("data").split("_")[1]),f=h*o.length,g=d/o.rateMax*f,d=(t("<div>",{"class":"jRatingColor",css:{width:g}}).appendTo(t(this)),t("<div>",{"class":"jRatingAverage",css:{width:0,top:-l}}).appendTo(t(this)));t("<div>",{"class":"jStar",css:{width:f,height:l,top:-(2*l),background:"url("+c+") repeat-x"}}).appendTo(t(this));t(this).css({width:f,overflow:"hidden",zIndex:1,position:"relative"}),p||t(this).bind({mouseenter:function(s){var a=r(this),n=s.pageX-a;t("<p>",{"class":"jRatingInfos",html:e(n)+' <span class="maxRate">/ '+o.rateMax+"</span>",css:{top:s.pageY+o.rateInfosY,left:s.pageX+o.rateInfosX}}).appendTo("body").show()},mouseover:function(s){t(this).css("cursor","pointer")},mouseout:function(){t(this).css("cursor","default"),d.width(0)},mousemove:function(s){var a=r(this),n=s.pageX-a;i=o.step?Math.floor(n/h)*h+h:n,d.width(i),t("p.jRatingInfos").css({left:s.pageX+o.rateInfosX}).html(e(i)+' <span class="maxRate">/ '+o.rateMax+"</span>")},mouseleave:function(){t("p.jRatingInfos").remove()},click:function(s){t(this).unbind().css("cursor","default").addClass("jDisabled"),t("p.jRatingInfos").fadeOut("fast",function(){t(this).remove()}),s.preventDefault();var a=e(i);d.width(i),t(".datasSent p").html("<strong>idBox : </strong>"+u+"<br /><strong>rate : </strong>"+a+"<br /><strong>action :</strong> rating"),t(".serverResponse p").html("<strong>Loading...</strong>"),t.post(o.phpPath,{idBox:u,rate:a,action:"rating"},function(s){s.error?(t(".serverResponse p").html(s.server),o.onError&&o.onError()):(t(".serverResponse p").html(s.server),o.onSuccess&&o.onSuccess())},"json")}})}):void 0}}(jQuery);