function searchfnc(e,t){if(searchquery="",null==t||""==t||0==/\S/.test(t))return void alert("Search statement shouldn't be empty");if([" ","!","@","#","$","^","&","*","(",",",")","_","+","-","=","&","%","~"].indexOf(t)>=0||t.indexOf("%")>=0)return void alert("Invalid Input");var n=window.location.href.split("?"),o=(n[0],e.options[e.selectedIndex].value);if("undefined"==typeof n[1])searchquery="_"+o+"="+t;else{for(var r=n[1].split("&"),a=!1,c=0;c<r.length;c++){var s=r[c].split("=");s[0]==="_"+o&&(r[c]=s[0]+"="+s[1]+" _OR "+t,a=!0),"page"===s[0]&&(r[c]=s[0]+"=1"),searchquery+=r[c]+"&"}searchquery=searchquery.substring(0,searchquery.length-1),a===!1&&(searchquery+="&_"+o+"="+t)}window.location=window.location.protocol+"//"+window.location.host+"/books?"+searchquery}function autocomplete(){var e;return e={},$("#headersearchfield").autocomplete({minLength:2,source:function(t,n){var o;return o=t.term,o in e?void n(e[o]):(search_by=$("#headersearchby").val(),"content"!=search_by&&"all"!=search_by?(searchfield=$("#headersearchfield").val(),$.getJSON("/en/books/autocomplete?type="+search_by,t,function(t,r,a){return e[o]=t,n(t)})):void 0)}})}function save_query(e){$.ajax({url:"/user_search_history/save_query?query="+encodeURIComponent(e),type:"GET",success:function(e){$("#flash").html(e),document.getElementById("save_query").style.display="none"}})}function loadformats(e){div_name="#"+e.toLowerCase()+"_hidden",content=$(div_name).html(),content=content.replace(/\n/g,"<br />"),"mods"==e.toLowerCase()&&(content=content.replace(/\s/g," &nbsp;")),$("#modallabel").html(e),$("#modalcontent").html(content)}$(document).ready(function(){autocomplete(),$(".tooltipname").length>0&&$(".tooltipname").tooltipster({interactive:!0,fixedWidth:280})});